<%= javascript_include_tag 'style' %>
<div class="row" style="background-color: #e8e8e8">
  <div class="">
    <nav style="margin-bottom: 20px;background-color: #640000">
      <div class="nav-wrapper">
        <a class="brand-logo right" style="padding-right: 20px">Dashboard</a>
        <a href="#" data-activates="slide-out" class="button-collapse">
          <i class="fa fa-bars fa-2x" aria-hidden="true"></i>
        </a>
      </div>
    </nav>

    <% if current_administrator.role == "registrar" %>
      <div class="row" style="margin-top: 50px">
        <div class="col s12 m12 l9 right">
          <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Register new account</a>
          <hr>
          <%= notice %>
        </div>
      </div>

      <div id="modal1" class="modal modal-fixed-footer">
        <div class="modal-content">
          <h4><center>Register new account</center></h4>
            <%= form_for :administrator , url:add_admin_path do |f| %>
              <div class="row">
                <div class="col s12 input-field">
                  <i class="material-icons prefix">face</i>
                  <label for="firtname">Firstname</label>
                  <%= f.text_field :firstname , required: 'required' %>
                </div>
                <div class="col s12 input-field">
                  <i class="material-icons prefix">face</i>
                  <label for="firtname">Middlename</label>
                  <%= f.text_field :middlename, required: 'required' %>
                </div>
                <div class="col s12 input-field">
                  <i class="material-icons prefix">face</i>
                  <label for="lastname">Lastname</label>
                  <%= f.text_field :lastname, required: 'required' %>
                </div>
                <div class="col s12 input-field">
                  <i class="material-icons prefix">email</i>
                  <label for="email">Email</label>
                  <%= f.email_field :email, required: 'required' %>
                </div>
                <div class="col s12 ">
                  <div class="input-field">
                  <i class="material-icons prefix">lock</i>
                    <%= f.select :role , 
                    options_for_select([["--ROLE--"], "registrar" , "faculty"]) , id:"level" %>
                  </div>  
                </div>
                <div class="col s12 input-field">
                  <i class="material-icons prefix">lock</i>
                  <label for="password">Password</label>
                  <%= f.password_field :password , required: 'required'%>
                </div>
              </div>
            </div>
          <div class="modal-footer">
            <a class="modal-action modal-close waves-effect waves-red btn-flat red white-text">Cancel</a>
            <%= f.submit "Register" , class:"btn green" %> 
          </div>
        <% end %>
      </div>
    <% else %>
      <!-- some codes here -->
    <% end %>

    <div class="row">
      <div class="col s12 m12 l9 right">
      <h4 class="green-text">Registered Accounts </h4><hr>
        <ul class="collection">
          <% @admins.each do |admin| %>
            <li class="collection-item avatar">
              <% if admin.image_file_name.present? %>
                <%= image_tag admin.image.url(:medium) , class:"circle materialboxed" %>
              <% else %>
                <%= image_tag "avatar.jpg" , class:"circle materialboxed" %>
              <% end %>
              <span class="title"><b><%= admin.firstname + " " + admin.lastname %> (<%= admin.role %>)</b></span>
              <p><%= admin.email %> <br>
                 Registered at <%= admin.created_at.to_s(:long) %>
              </p>
              <% @section.each do |section| %>
                <%= section.section %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
	</div><!-- row -->
</div>

<div class="col s12 ">
    <%= render 'partials/sidebar' %>
</div>

<style type="text/css">
  
  .modal-footer {
    background-color: #640000 !important;
  }

  .name {
    font-size: 30px;
  }
  @media (max-width: 575px) { 
     .modal.open{
        width: 100%;
        max-height: 100%;
        height: 100%;
        top: 0 !important;
      }
      .modal-content {
        height: calc(100% - 56px);
      }
  }
  /*// Small devices (landscape phones, 576px and up)*/
  @media (min-width: 576px) and (max-width: 767px) {  
     .modal.open{
        width: 100%;
        max-height: 100%;
        height: 100%;
        top: 0 !important;
      }
      .modal-content {
        height: calc(100% - 56px);
      }
  }
</style>
  


