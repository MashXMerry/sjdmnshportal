<%= javascript_include_tag 'style' %>
<div class="row" style="background-color: #e8e8e8">
  <div class="">
    <nav style="margin-bottom: 20px;background-color: #640000">
      <div class="nav-wrapper">
        <a class="brand-logo right" style="padding-right: 20px">Add student</a>
        <a href="#" data-activates="slide-out" class="button-collapse">
          <i class="fa fa-bars fa-2x" aria-hidden="true"></i>
        </a>
        <ul class="right">
      </ul>
      </div>
    </nav>
    <!-- ++++++++++++++++++++ MODAL ++++++++++++++++++++++++ -->
    <div class="row" style="padding-top: 30px">
      <div class="col s12 m12 l9 right">
        <%= form_for(@student , remote: true , html: { class:"student-form" } ) do |f| %>
        <div class="card white">
          <div class="card-content">
            <span class="card-title">Add Student</span>
              <div class="row">
                <div class="col s12 m4 l4">
                  <div class="input-field">
                    <i class="material-icons prefix">face</i>
                    <%= f.text_field :firstname , id:"firstname" , required: "required" %>
                    <label>Firstname</label> 
                  </div>
                </div>
                <div class="col s12 m4 l4">
                  <div class="input-field">
                    <i class="material-icons prefix">face</i>
                    <%= f.text_field :middlename , id:"middlename" %>
                    <label>Middlename</label> 
                  </div>  
                </div>
                <div class="col s12 m4 l4">
                  <div class="input-field">
                    <i class="material-icons prefix">face</i>
                    <%= f.text_field :lastname , id:"lastname" , required: "required" %>
                    <label>Lastname</label> 
                  </div>  
                </div>
                <div class="col s12">
                  <div class="input-field">
                    <i class="material-icons prefix">face</i>
                    <%= f.text_field :lrn , id:"lrn" , required: "required" , 'maxLength' => '11' %>
                    <label>L R N</label>
                  </div>
                </div>
                <div class="col s12">
                  <div class="input-field">
                    <i class="material-icons prefix">phone</i>
                    <%= f.number_field :phone_number , id:"phone_number", min: '9999999999' , max: '9999999999' %>
                    <label>Contact number</label>
                  </div>
                </div>
                <div class="col s12">
                  <div class="input-field">
                    <i class="material-icons prefix">lock</i>
                    <%= f.password_field :password , disabled: true,placeholder:"Password" ,
                    id:"password" %>
                  </div>
                </div>
                <div class="col s12 m10 l10" id="level-field">
                  <div class="input-field">
                    <i class="material-icons prefix">create</i>
                    <%= f.text_field :section , disabled: true ,id:'section-field', placeholder:"Section" , required: 'required' %>
                  </div>
                </div>

                <div class="col s12 m2 l2">
                  <a class="waves-effect waves-light btn modal-trigger blue btn-large" href="#modal1">Section</a>
                  <!-- Modal Structure -->
                  <div id="modal1" class="modal modal-fixed-footer gray">
                    <div class="modal-content">
                      <h3 class="center">Choose section</h3>
                      <ul class="collapsible popout" data-collapsible="accordion">
                        <li>
                          <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
                          Grade 7</div>
                          <div class="collapsible-body">
                            <% @sections7.each do |section| %>
                              <button type="button" class="btn modal-close btn-large waves-effect waves-blue" style="margin-bottom: 5px" id="btn-section<%= section.id %>">
                                  <%= section.section %>
                                </button>
                            <% end %>
                          </div>
                        </li>
                        <li>
                          <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
                          Grade 8</div>
                          <div class="collapsible-body">
                            <div class="collection">
                              <% @sections8.each do |section| %>
                                <button type="button" class="btn modal-close btn-large waves-effect waves-blue" style="margin-bottom: 5px" id="btn-section<%= section.id %>">
                                  <%= section.section %>
                                </button>
                              <% end %>
                            </div>
                          </div>
                        </li>
                        <li>
                          <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
                          Grade 9</div>
                          <div class="collapsible-body">
                            <div class="collection">
                              <% @sections9.each do |section| %>
                                <button type="button" class="btn modal-close btn-large waves-effect waves-blue" style="margin-bottom: 5px" id="btn-section<%= section.id %>">
                                  <%= section.section %>
                                </button>
                              <% end %>
                            </div>
                          </div>
                        </li>
                        <li>
                          <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
                          Grade 10</div>
                          <div class="collapsible-body">
                            <div class="collection">
                              <% @sections10.each do |section| %>
                                <button class="btn modal-close btn-large waves-effect waves-blue" style="margin-bottom: 5px" id="btn-section<%= section.id %>">
                                  <%= section.section %>
                                </button>
                              <% end %>
                            </div>
                          </div>
                        </li>
                        <li>
                          <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
                          Grade 11</div>
                          <div class="collapsible-body">
                            <div class="collection">
                              <% @sections11.each do |section| %>
                                <button type="button" class="btn modal-close btn-large waves-effect waves-blue" style="margin-bottom: 5px" id="btn-section<%= section.id %>">
                                  <%= section.section %>
                                </button>
                              <% end %>
                            </div>
                          </div>
                        </li>
                        <li>
                          <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>
                          Grade 12</div>
                          <div class="collapsible-body">
                            <div class="collection">
                              <% @sections12.each do |section| %>
                                <button type="button" class="btn modal-close btn-large waves-effect waves-blue" style="margin-bottom: 5px" id="btn-section<%= section.id %>">
                                  <%= section.section %>
                                </button>
                              <% end %>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                    <div class="modal-footer">
                      <a class="modal-action modal-close waves-effect waves-green btn-flat red waves-effect waves-yellow white-text">
                      close</a>
                    </div>
                  </div>
                </div><!-- col s12 m2 l2 -->

                <div class="col s12 m6 l6">
                  <div class="input-field">
                    <i class="material-icons prefix">create</i>
                    <%= f.text_field :level , id:"level" , placeholder: 'Year level' ,disabled: true %>
                  </div>    
                </div>
                <div class="col s12 m6 l6">
                  <div class="input-field">
                    <%= f.select :gender , options_for_select([["Gender"],"Male" , "Female"]) ,id:"gender" , :required => true %>
                  </div>  
                </div>
                <%= f.text_field :status , type: 'hidden' , value: 'enrolled' %>
              </div>
          </div>
          <div class="card-action">
            <%= f.submit "Register student", id: 'btn-submit' , class:"btn green waves-effect waves-blue" , data: {
              disable_with: "Adding student..."
            } %>
          </div>
        </div>
        <% end %>
      </div>
    </div>

  </div>

  <div class="col s12 ">
    <%= render 'partials/sidebar' %>
  </div>

</div>


<script type="text/javascript">
  $(document).ready(function() {
    <% @sections7.each do |section| %>
      $('#btn-section<%= section.id %>').on('click' ,function(){
        $('#section-field').val('<%= section.section %>');
        $('#level').val(<%= section.yearlvl %>)
      });
    <% end %>
    <% @sections8.each do |section| %>
      $('#btn-section<%= section.id %>').on('click' ,function(){
        $('#section-field').val('<%= section.section %>');
        $('#level').val(<%= section.yearlvl %>)
      });
    <% end %>
    <% @sections9.each do |section| %>
      $('#btn-section<%= section.id %>').on('click' ,function(){
        $('#section-field').val('<%= section.section %>');
        $('#level').val(<%= section.yearlvl %>)
      });
    <% end %>
    <% @sections10.each do |section| %>
      $('#btn-section<%= section.id %>').on('click' ,function(){
        $('#section-field').val('<%= section.section %>');
        $('#level').val(<%= section.yearlvl %>)
      });
    <% end %>
    <% @sections11.each do |section| %>
      $('#btn-section<%= section.id %>').on('click' ,function(){
        $('#section-field').val('<%= section.section %>');
        $('#level').val(<%= section.yearlvl %>)
      });
    <% end %>
    <% @sections12.each do |section| %>
      $('#btn-section<%= section.id %>').on('click' ,function(){
        $('#section-field').val('<%= section.section %>');
        $('#level').val(<%= section.yearlvl %>)
      });
    <% end %>

    $('#firstname').change(function() {
      var Fname = $('#firstname').val();
      var SFname = Fname.substring(0,4)
      $('#password').val(SFname + $('#lrn').val());
    });
    $('#lrn').change(function() {
      var Fname = $('#firstname').val();
      var SFname = Fname.substring(0,4)
      $('#password').val(SFname + $('#lrn').val());
    });
  });
</script>

<style type="text/css">
  body {
    background-color: #e8e8e8;
  }
  .modal.open{
    width: 100%;
    max-height: 100%;
    height: 100%;
    top: 0 !important;
  }
  .modal-content {
    height: calc(100% - 56px);
  }

  /*// Small devices (landscape phones, 576px and up)*/
  @media (min-width: 576px) and (max-width: 767px) {  
     .modal.open{
        width: 100%;
        max-height: 100%;
        height: 100%;
        top: 0 !important;
      }
      .modal-content {
        height: calc(100% - 56px);
      }
  }

</style>





